{
  "version": 3,
  "sections": {
    "executive_summary": {
      "content": "OpenSprint is a web application that guides users through the complete software development lifecycle using AI agents. It provides a structured, five-phase workflow — **SPEED**: Sketch, Plan, Execute, Evaluate, and Deliver — that transforms high-level product ideas into working software with minimal manual intervention.\n\nThe platform pairs a browser-based interface with a background agent CLI, enabling AI to autonomously execute development tasks while keeping the user in control of strategy and direction. The core philosophy is that humans should focus on _what_ to build and _why_, while AI handles _how_ to build it.\n\nOpenSprint supports multiple agent backends (Claude, Cursor, and custom CLI agents), comprehensive automated testing including end-to-end and integration tests, configurable human-in-the-loop thresholds, and full offline operation for users with local agent setups.",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "problem_statement": {
      "content": "Building software with AI today is fragmented and unstructured. Developers use AI coding assistants for individual tasks, but there is no cohesive system that manages the full journey from idea to deployed product. This leads to several persistent problems:\n\n- **Lack of architectural coherence:** AI-generated code often lacks a unified vision because each prompt is handled in isolation, without awareness of the broader system design.\n- **No dependency tracking:** When building features in parallel, there is no mechanism to ensure that work on one feature accounts for dependencies on another.\n- **Manual orchestration overhead:** Users spend significant time managing prompts, context windows, and task sequencing rather than focusing on product decisions.\n- **No feedback loop:** There is no structured way to validate completed work and feed findings back into the development process.\n\nOpenSprint solves these problems by providing an end-to-end platform that maintains context across the entire lifecycle and automates the orchestration of AI development agents.",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "user_personas": {
      "content": "### The Product-Minded Founder\n\nA non-technical founder with a clear product vision who wants to build an MVP without hiring a development team. They understand what they want to build but need AI to handle the engineering. They value speed, clear communication about what is being built, and the ability to provide feedback without writing code.\n\n### The Solo Developer\n\nAn experienced developer who wants to multiply their output. They can code but want to delegate routine implementation to AI while focusing on architecture and product decisions. They value transparency into what the AI is doing, the ability to intervene when needed, and high-quality code output.\n\n### The Agency / Consultancy\n\nA small team that builds software for clients. They need to move quickly from client requirements to working software, maintain multiple projects simultaneously, and provide clients with visibility into progress. They value the structured workflow for client communication and the ability to run multiple projects in parallel.",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "goals_and_metrics": {
      "content": "### Primary Goals\n\n1. Reduce the time from idea to working prototype by 10x compared to traditional AI-assisted development workflows.\n2. Enable non-engineers to ship production-quality software by handling technical complexity behind the scenes.\n3. Maintain architectural coherence across an entire project by flowing design decisions through every phase.\n4. Create a self-improving development flywheel where validation feedback automatically triggers corrective action.\n\n### Success Metrics\n\n| Metric                                | Target                                     | Measurement Method                 |\n| ------------------------------------- | ------------------------------------------ | ---------------------------------- |\n| Time from idea to working prototype   | < 1 day for standard web apps              | End-to-end session timing          |\n| User intervention rate during Execute | < 10% of tasks require manual input        | Task completion telemetry          |\n| Sketch-to-code fidelity               | > 90% alignment with PRD                   | Automated PRD compliance checks    |\n| Feedback loop closure time            | < 30 min from bug report to fix deployed   | Evaluate-to-Execute cycle tracking |\n| First-time user task completion       | > 80% complete a full Sketch-Execute cycle | Onboarding funnel analytics        |\n| Test coverage                         | > 80% code coverage with passing E2E tests | Automated coverage reporting       |",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "feature_list": {
      "content": "Add under Project Setup & Configuration:\n\n- **Help modal (?):** Available on both homepage and per-project view. Two tabs: \"Ask a Question\" (default) and \"Meet your Team\". Ask a Question is a chat area with an AI agent in ask-only mode — explicitly instructed to answer only, never to change project state, PRD, or tasks. The agent receives project context when in per-project view (PRD, Plans, tasks, current agent status) or summary info about all projects when on homepage. Includes instructions for accessing more information about projects, tasks, and currently running agents. Meet your Team displays configured agents and their roles.",
      "version": 3,
      "updatedAt": "2026-02-25T22:47:28.376Z"
    },
    "technical_architecture": {
      "content": "### Architecture Overview\n\nThree primary layers: web frontend, backend API server, and background agent CLI. Frontend uses WebSockets for real-time updates and REST for CRUD. Backend orchestrates agent CLIs, manages project state, and maintains the living PRD. Fully offline-capable with local agents.\n\n### Technology Stack\n\n- **Backend:** Node.js + TypeScript (subprocess management, WebSocket, beads CLI via `child_process.exec()`)\n- **Frontend:** React + TypeScript\n- **Task store:** Beads (git-based, CLI `bd` with `--json`)\n- **Version control:** Git, branch-per-task; Worktree mode: isolated worktrees; Branches mode: main repo with task branches (configurable in Agent Config)\n\n### Core Components\n\n| Component           | Responsibility |\n| ------------------- | -------------- |\n| Web Frontend        | UI for all five phases; real-time agent monitoring |\n| Backend API         | Project state, WebSocket relay, PRD versioning, agent orchestration |\n| Agent CLI           | Code generation, testing, debugging (Claude/Cursor/Custom) |\n| Orchestration Layer | Deterministic Node.js; agent lifecycle; git/task ops; commit queue; watchdog |\n| Beads               | Issue CRUD, dependencies, `bd ready`, assignee, hierarchical IDs |\n| Test Runner         | Jest, Playwright, etc. — auto-detected from `package.json` |\n| Deployment          | Expo.dev or custom pipeline |\n\n### Orchestrator Trust Boundary\n\nOrchestrator owns: worktree/branch management (Worktree mode) or branch-only management (Branches mode), commits/merges, agent triggering, beads state transitions, beads issue creation, PRD updates (except Dreamer direct write), gating task closure. Agents produce outputs; orchestrator performs all critical operations.\n\n### Data Flow\n\nSketch → PRD. Plan → Plan markdowns (epics). Execute → tasks in beads. Agent CLIs execute tasks. Evaluate → feedback mapped to epics/tasks. Changes propagate upstream to PRD.\n\n### Orchestrator Lifecycle\n\nOne orchestrator per project, always on. Single Coder/Reviewer at a time (v1); Planning-slot agents concurrent. Event-driven + 5-min watchdog. State in `.opensprint/orchestrator-state.json`; recovery on crash.\n\n### Git Concurrency\n\nSerialized commit queue for main-branch ops. Beads auto-commit disabled; orchestrator manages persistence.",
      "version": 2,
      "updatedAt": "2026-02-25T05:10:52.879Z"
    },
    "data_model": {
      "content": "### Entity Relationship\n\n```\nUser (implicit)\n  └── Project (1:many)\n        ├── PRD (1:1, .opensprint/prd.json)\n        ├── Conversation (1:many, per phase)\n        ├── Plan (1:many, .opensprint/plans/*.md)\n        │     └── Task (beads issues, parent-child IDs)\n        │           └── AgentSession (1:many)\n        ├── FeedbackItem (1:many)\n        ├── DeploymentRecord (1:many)\n        └── Settings (1:1)\n```\n\n### Key Entities\n\n- **Project:** id, name, repo_path, current_phase\n- **PRD:** version, sections (content, version, updated_at), change_log\n- **Plan:** plan_id, bead_epic_id, gate_task_id, shipped_at, complexity\n- **Task (beads):** id, title, description, status, priority, assignee, labels, dependencies\n- **AgentSession:** task_id, attempt, status, output_log, test_results\n- **FeedbackItem:** text, category, mapped_plan_id, created_task_ids, status\n- **DeploymentRecord:** commit_hash, target, mode, status, url\n- **Settings:** gitWorkingMode (worktree|branches), planning_agent, coding_agent, deployment, hil_config, test_framework, test_command\n\n### Storage\n\n- **Project index:** `~/.opensprint/projects.json`\n- **Per-project:** `.opensprint/`, beads in `.beads/` — version-controlled",
      "version": 2,
      "updatedAt": "2026-02-25T05:10:52.879Z"
    },
    "api_contracts": {
      "content": "### REST API (`/api/v1`)\n\n**Projects:** GET/POST `/projects`, GET/PUT/DELETE `/projects/:id`\n\n**PRD:** GET/PUT `/projects/:id/prd`, GET `/projects/:id/prd/:section`, GET `/projects/:id/prd/history`\n\n**Plans:** GET/POST `/projects/:id/plans`, GET/PUT `/projects/:id/plans/:planId`, POST `/projects/:id/plans/:planId/execute`, POST `/projects/:id/plans/:planId/re-execute`, GET `/projects/:id/plans/dependencies`\n\n**Tasks:** GET `/projects/:id/tasks`, GET `/projects/:id/tasks/ready`, GET `/projects/:id/tasks/:taskId`, GET `/projects/:id/tasks/:taskId/sessions`, GET `/projects/:id/tasks/:taskId/sessions/:attempt`\n\n**Execute:** GET `/projects/:id/execute/status`\n\n**Evaluate:** GET/POST `/projects/:id/feedback`, GET `/projects/:id/feedback/:feedbackId`\n\n**Deploy:** POST `/projects/:id/deploy`, GET `/projects/:id/deploy/status`, GET `/projects/:id/deploy/history`, POST `/projects/:id/deploy/:deployId/rollback`, PUT `/projects/:id/deploy/settings`\n\n**Chat:** POST `/projects/:id/chat`, GET `/projects/:id/chat/history`\n\n### WebSocket (`ws://localhost:<port>/ws/projects/:id`)\n\n**Server → Client:** `task.updated`, `task.blocked`, `agent.output`, `agent.completed`, `prd.updated`, `execute.status`, `hil.request`, `feedback.mapped`, `deploy.started`, `deploy.completed`, `deploy.output`\n\n**Client → Server:** `agent.subscribe`, `agent.unsubscribe`, `hil.respond`",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "non_functional_requirements": {
      "content": "| Category        | Requirement                                                                                                 |\n| --------------- | ----------------------------------------------------------------------------------------------------------- |\n| Performance     | Agent output streaming < 500ms latency; task status updates within 1 second                                |\n| Scalability     | Up to 500 tasks; single Coder/Reviewer in v1                                                                |\n| Reliability     | Agent failures must not corrupt state; transactional, recoverable                                           |\n| Security        | Sandboxed code execution; filesystem isolation                                                             |\n| Usability       | First-time users reach Execute within 30 minutes without docs                                               |\n| Theme Support   | Light/dark/system; persists; no flash on load                                                             |\n| Data Integrity  | Full audit trail; no data loss on agent crash                                                              |\n| Testing         | 80% coverage; all layers automated; real-time results                                                      |\n| Offline Support | All core features work without internet                                                                     |",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    },
    "open_questions": {
      "content": "All previously identified questions have been resolved and documented in the Resolved Decisions section of the full PRD. No open questions at this time.",
      "version": 1,
      "updatedAt": "2026-02-25T00:03:38.391Z"
    }
  },
  "changeLog": [
    {
      "section": "executive_summary",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "problem_statement",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "user_personas",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "goals_and_metrics",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "feature_list",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "technical_architecture",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "data_model",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "api_contracts",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "non_functional_requirements",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "open_questions",
      "version": 1,
      "source": "sketch",
      "timestamp": "2026-02-25T00:03:38.391Z",
      "diff": "[Initial content added]"
    },
    {
      "section": "feature_list",
      "version": 2,
      "source": "plan",
      "timestamp": "2026-02-25T05:10:52.879Z",
      "diff": "[+1 lines, +217 chars]"
    },
    {
      "section": "technical_architecture",
      "version": 2,
      "source": "plan",
      "timestamp": "2026-02-25T05:10:52.879Z",
      "diff": "[+0 lines, +120 chars]"
    },
    {
      "section": "data_model",
      "version": 2,
      "source": "plan",
      "timestamp": "2026-02-25T05:10:52.879Z",
      "diff": "[+1 lines, +135 chars]"
    },
    {
      "section": "feature_list",
      "version": 3,
      "source": "eval",
      "timestamp": "2026-02-25T22:47:28.376Z",
      "diff": "[-41 lines, -1376 chars]"
    }
  ]
}