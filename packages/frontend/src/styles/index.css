@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme CSS variables â€” light/dark */
:root,
html[data-theme="light"],
html:not([data-theme]) {
  --color-bg: #f9fafb;
  --color-bg-elevated: #ffffff;
  --color-text: #111827;
  --color-text-muted: #6b7280;
  --color-surface: #ffffff;
  --color-border: #e5e7eb;
  --color-border-subtle: #f3f4f6;
  --color-ring: #d1d5db;
  --color-input-bg: #ffffff;
  --color-input-text: #111827;
  --color-input-placeholder: #9ca3af;
  --color-code-bg: #1f2937;
  --color-code-text: #10b981;
  --color-overlay: rgba(0, 0, 0, 0.4);
  --color-surface-muted: #f3f4f6;
  /* DependencyGraph D3/SVG theme tokens */
  --color-graph-edge: #d1d5db;
  --color-graph-edge-critical: #dc2626;
  --color-graph-text: #111827;
  --color-graph-node-default-fill: #f9fafb;
  --color-graph-node-default-stroke: #e5e7eb;
  --color-graph-status-planning-fill: #fef3c7;
  --color-graph-status-planning-stroke: #f59e0b;
  --color-graph-status-building-fill: #dbeafe;
  --color-graph-status-building-stroke: #3b82f6;
  --color-graph-status-complete-fill: #d1fae5;
  --color-graph-status-complete-stroke: #10b981;
  --color-graph-arrow: #9ca3af;
  --color-graph-arrow-critical: #dc2626;
}

html[data-theme="dark"] {
  --color-bg: #111827;
  --color-bg-elevated: #1f2937;
  --color-text: #f3f4f6;
  --color-text-muted: #9ca3af;
  --color-surface: #1f2937;
  --color-border: #374151;
  --color-border-subtle: #1f2937;
  --color-ring: #4b5563;
  --color-input-bg: #1f2937;
  --color-input-text: #f3f4f6;
  --color-input-placeholder: #6b7280;
  --color-code-bg: #111827;
  --color-code-text: #34d399;
  --color-overlay: rgba(0, 0, 0, 0.6);
  --color-surface-muted: #1f2937;
  /* DependencyGraph D3/SVG theme tokens (dark mode) */
  --color-graph-edge: #4b5563;
  --color-graph-edge-critical: #ef4444;
  --color-graph-text: #f3f4f6;
  --color-graph-node-default-fill: #374151;
  --color-graph-node-default-stroke: #4b5563;
  --color-graph-status-planning-fill: #78350f;
  --color-graph-status-planning-stroke: #f59e0b;
  --color-graph-status-building-fill: #1e3a8a;
  --color-graph-status-building-stroke: #60a5fa;
  --color-graph-status-complete-fill: #064e3b;
  --color-graph-status-complete-stroke: #34d399;
  --color-graph-arrow: #6b7280;
  --color-graph-arrow-critical: #ef4444;
}

@layer base {
  html[data-theme="light"],
  html:not([data-theme]) {
    @apply bg-theme-bg text-theme-text;
  }
  html[data-theme="dark"] {
    @apply bg-theme-bg text-theme-text;
  }

  /* Sketch phase always uses light mode per feedback */
  html.sketch-phase-light {
    @apply bg-theme-bg text-theme-text;
  }
html.sketch-phase-light {
  --color-bg: #f9fafb;
  --color-bg-elevated: #ffffff;
  --color-text: #111827;
  --color-text-muted: #6b7280;
  --color-surface: #ffffff;
  --color-border: #e5e7eb;
  --color-border-subtle: #f3f4f6;
  --color-ring: #d1d5db;
  --color-input-bg: #ffffff;
  --color-input-text: #111827;
  --color-input-placeholder: #9ca3af;
  --color-code-bg: #1f2937;
  --color-code-text: #10b981;
  --color-overlay: rgba(0, 0, 0, 0.4);
  --color-surface-muted: #f3f4f6;
  --color-graph-edge: #d1d5db;
  --color-graph-edge-critical: #dc2626;
  --color-graph-text: #111827;
  --color-graph-node-default-fill: #f9fafb;
  --color-graph-node-default-stroke: #e5e7eb;
  --color-graph-status-planning-fill: #fef3c7;
  --color-graph-status-planning-stroke: #f59e0b;
  --color-graph-status-building-fill: #dbeafe;
  --color-graph-status-building-stroke: #3b82f6;
  --color-graph-status-complete-fill: #d1fae5;
  --color-graph-status-complete-stroke: #10b981;
  --color-graph-arrow: #9ca3af;
  --color-graph-arrow-critical: #dc2626;
}
  body {
    @apply antialiased;
  }
}

@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-lg bg-brand-600 px-4 py-2.5
      text-sm font-semibold text-white shadow-sm hover:bg-brand-700
      focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2
      focus-visible:outline-brand-600 transition-colors;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-lg bg-theme-surface px-4 py-2.5
      text-sm font-semibold text-theme-text shadow-sm ring-1 ring-inset ring-theme-ring
      hover:bg-theme-bg-elevated transition-colors;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center rounded-lg bg-red-600 px-4 py-2.5
      text-sm font-semibold text-white shadow-sm hover:bg-red-700 transition-colors;
  }

  .card {
    @apply rounded-xl bg-theme-surface shadow-sm ring-1 ring-theme-border/10;
  }

  .input {
    @apply block w-full rounded-lg border-0 py-2.5 px-3 shadow-sm sm:text-sm
      bg-theme-input-bg text-theme-input-text placeholder:text-theme-input-placeholder
      ring-1 ring-inset ring-theme-ring focus:ring-2 focus:ring-inset focus:ring-brand-600;
  }

  .phase-tab {
    @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors;
  }

  .phase-tab-active {
    @apply bg-brand-600 text-white;
  }

  .phase-tab-inactive {
    @apply text-theme-muted hover:text-theme-text hover:bg-theme-border-subtle;
  }

  .kanban-column {
    @apply flex flex-col gap-3 min-w-[280px] max-w-[320px];
  }

  .kanban-card {
    @apply card p-4 cursor-pointer hover:shadow-md transition-shadow;
  }
}
